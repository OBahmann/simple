<section class="fullscreen-popup-container" data-bind="css: { attached: isCompositionComplete }">
    <div class="fp-content-row">
        <div class="fp-content-cell">
            <div class="fp-content">
                <div class="fp-content-step evaluation" data-bind="css: { show: isEvaluationStep && isCompositionComplete, hide: !isEvaluationStep() }">
                    <figure class="fp-image">
                        <!-- ko compose: { model: 'dialogs/nps/figures/evaluation' } -->
                        <!-- /ko -->
                    </figure>
                    <h1 class="fp-title" data-bind="text: evaluationStepTitle"></h1>
                    <h2 class="fp-subtitle" data-translate-text="[rate your overall experience]"></h2>
                    <div class="fp-rating-container">
                        <div class="rating-control" data-bind="if: isEvaluationStep, rating: { value: score, max: 10, onValueUpdated: goToFeedbackStep }"></div>
                        <div class="fp-rating-tips">
                            <span class="fp-rating-tip left" data-translate-text="[poor]"></span>
                            <span class="fp-rating-tip right" data-translate-text="[excellent]"></span>
                        </div>
                    </div>
                    <hr />
                </div>
                <div class="fp-content-step feedback" data-bind="css: { show: isFeedbackStep, hide: !isFeedbackStep() }">
                    <h1 class="fp-title" data-translate-text="[you rated this course with]"></h1>
                    <figure class="fp-image">
                        <!-- ko compose: { model: 'dialogs/nps/figures/feedback', activationData: score() } -->
                        <!-- /ko -->
                    </figure>
                    <h2 class="fp-subtitle" data-translate-text="[course score reason]"></h2>
                        <div class="fp-field">
                            <div class="fp-field-input" data-bind="hasFocus: isFeedbackEditing, editableText: { text: feedback, onEnterKeyPress: submit }, scrollbar: { checkDOMChanges: true }, attr: { contentEditable: isFeedbackStep }"></div>
                        </div>
                        <div class="btn-submit-wrapper">
                            <button href="#" class="button small primary" data-bind="click: submit, disable: isReporting() || !isFeedbackStep(), css: { progress: isReporting }" data-translate-title="[submit]">
                                <!-- ko if: isReporting -->
                                    <span class="button-caption-loader"></span>
                                <!-- /ko -->
                                <!-- ko ifnot: isReporting -->
                                    <span class="button-caption" data-translate-text="[submit]"></span>
                                <!-- /ko -->
                            </button>
                        </div>
                        <hr />
                </div>
                <div class="fp-content-step last-step delay" data-bind="css: { show: isLastStep, hide: !isEvaluationStep() && !isLastStep() }">
                    <figure class="fp-image">
                        <!-- ko compose: { model: 'dialogs/nps/figures/rocket' } -->
                        <!-- /ko -->
                    </figure>
                    <h1 class="fp-title" data-translate-text="[thank you for your feedback]"></h1>
                    <!-- ko ifnot: isCourseEmbedded -->
                    <h2 class="fp-subtitle" data-translate-text="[you can close the page now]"></h2>
                    <!-- /ko -->
                    <hr />
                </div>
            </div>
        </div>
    </div>
</section>